<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Fussball Trikot</title>
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/javascript">
productSearch('2011-03-01', 'A6715064998BE907ED32', '994828', 'de', '1739,6985,6906,9435,307', 30, 1000, null, 0, 3, true, 'fussball trikot', 'searchHandler');

function productSearch(version, connectId, adspace, region, programs, minPrice, maxPrice, category, page, items,hasImages, q, callback) {

    var url = 'http://api.zanox.com/json/' + version + '/products?connectId=' + connectId;
    if (adspace) url += '&adspace=' + adspace;
    if (region) url += '&region=' + region;
    if (programs) url += '&programs=' + programs;
    if (category) url += '&category=' + category;
    if (page) url += '&page=' + page;
    if (items) url += '&items=' + items;
    if (minPrice) url += '&minPrice=' + minPrice;
    if (maxPrice) url += '&maxPrice=' + maxPrice;
    if (hasImages) url += '&hasImages=' + hasImages;
    if (callback) url += '&callback=' + callback;
    if (q) url += '&q=' + q;
    addScript(url);
}

function addScript(url) {
    var script = document.createElement("script");
    script.src = url + '&t='+new Date().getMinutes();
    script.type = "text/javascript";
    document.getElementsByTagName("head")[0].appendChild(script);
}

function searchHandler(data) {
    if (data) {
        var productItems = data.productItems.productItem;
        var container = document.getElementById('zxAdList');
        for (var i = 0; i < productItems.length; i++) {
            renderLinkListItem(productItems[i], container);
        }
    }
}

function renderLinkListItem(item, container) {
    var link = item.trackingLinks.trackingLink[0].ppc;
    var name = item.name;
    var program = item.program.$;
    var price = item.price;
    var currency = item.currency;
    var imgsmall = item.image.small;

    var li = document.createElement('li');
    var content = '<a href="' + link + '">' + name + '</a>';
    content += '<br><img src="' + imgsmall + '">';
    li.innerHTML = content;
    container.appendChild(li);
}
</script>
</head>
<body>

<ul id="zxAdList"></ul>

</body>
</html>